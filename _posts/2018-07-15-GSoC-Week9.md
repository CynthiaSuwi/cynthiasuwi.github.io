---
layout: post
title:  "GSoC Week 9"
date:   2018-07-15
excerpt: "This is my 7th blog in this category (Google Summer of Code 2018). This is a short report on my work during Week 9. This week, we make a big breakthrough and successfully run the whole workflow in DeepSpeech2 on CWRU server."
tag:
- GSoC
comments: true
---

# Google Summer of Coding Week 9


## Run Aishell on CWRU HPC

**1.Login and open screen**

{% highlight shell %}
ssh sxx186@redhen1.case.edu
screen
ssh sxx186@rider.case.edu
srun -p gpu -C gpuk40 --mem= 32gb --gres=gpu:2 --pty bash
module load singularity/2.5.1
{% endhighlight %}

- Note: remember to require larger memory, otherwise it will occur the error "srun out of memory".

**2.Get into the image**
{% highlight shell %}
cd /mnt/rds/redhen/gallina/Singularity/DeepSpeech2/DeepSpeech/
singularity shell --nv -e -H `pwd` deepspeech2_suwi_singularity.simg
{% endhighlight %}

- Note 1: remember to add "--nv", otherwise it will show CUDA error.
- Note 2: there's no need to UNSET HOME anymore, since I created a Singularity recipe to set environment.

**3.Run the code**

{% highlight shell %}
cd examples/aishell/
sh run_data.sh
sh run_infer_golden.sh
sh run_test_golden.sh
{% endhighlight %}

**4.Results**

- Note: I modified the run_infer_golden.sh file to change lm model as larger 70GB model. And skip the repeating download step to realize quicker execution.
